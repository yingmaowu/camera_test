{% extends "base.html" %}
{% block title %}舌診練習{% endblock %}

{% block content %}
<div class="card">
  <h1>舌診練習</h1>
  <p class="muted">請觀察圖片並選出最符合的選項。</p>

  <!-- 題幹 -->
  <h2 style="margin-top:8px">{{ question.question }}</h2>

  <!-- 題圖 -->
  <div class="center" style="margin:12px 0">
    <img src="{{ question.image_url }}" alt="舌照" style="max-height:360px; border-radius:12px">
  </div>

  <!-- 作答表單 -->
  <form method="POST" action="/submit_practice_answer" class="flex-col">
    <input type="hidden" name="qid" value="{{ qid }}">

    <div class="grid grid-2" id="options">
      {% for choice in question.choices %}
      <label class="card" style="display:flex; align-items:center; gap:10px; cursor:pointer">
        <input type="radio" name="answer" value="{{ choice }}" required>
        <span>{{ choice }}</span>
      </label>
      {% endfor %}
    </div>

    <div class="sticky-actions flex" style="justify-content:center; margin-top:8px">
      <button type="submit" class="btn">提交</button>
      <a class="btn btn-outline" href="{{ url_for('teaching') if 'teaching' in globals() else '/' }}">返回教學</a>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  // 可用性：載入後自動聚焦到第一個選項
  window.addEventListener('DOMContentLoaded', () => {
    const first = document.querySelector('input[name="answer"]');
    first && first.focus();
  });

  // 方便鍵盤操作：Enter 直接提交
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && document.activeElement?.name === 'answer') {
      e.preventDefault();
      document.querySelector('button[type="submit"]')?.click();
    }
  });
</script>
{% endblock %}
