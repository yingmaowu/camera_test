{% extends "base.html" %}
{% block title %}舌象分類教學（互動）{% endblock %}

{% block content %}
<div class="card">
  <h1>舌象分類教學</h1>
  <p class="muted">選擇「部位」與「顏色」，查看對應的中醫判讀與常見提示。</p>

  <div class="grid grid-2" style="margin-top:12px">
    <!-- 圖像區 -->
    <div class="card center" style="padding:0">
      <div style="width:100%; max-width:520px; aspect-ratio:1/1; background:#fafafa; border-radius:12px; overflow:hidden; display:flex; align-items:center; justify-content:center">
        <img id="tongue-illustration"
             alt="舌頭示意圖"
             src="{{ url_for('static', filename='images/tongue-diagram.jpg') }}"
             style="max-width:100%; height:auto; display:block">
      </div>
    </div>

    <!-- 操作區 -->
    <div class="card">
      <h2>步驟 1：選擇部位</h2>
      <div id="region-btns" class="btn-group" style="margin-top:8px"></div>

      <h2 style="margin-top:16px">步驟 2：選擇顏色</h2>
      <div id="color-btns" class="btn-group" style="margin-top:8px"></div>

      <div class="btn-group" style="margin-top:16px">
        <button id="reset" class="btn btn-outline" type="button">重設</button>
      </div>

      <div id="result" class="card" style="margin-top:16px; background:#fff">
        <h2>結果</h2>
        <p class="muted">請先選擇部位與顏色。</p>
        <div id="result-body" style="margin-top:6px"></div>
      </div>
    </div>
  </div>
</div>

<div class="sticky-actions center" style="margin-top:12px">
  <a class="btn btn-outline" href="{{ url_for('teaching') }}">返回教學資源</a>
  <a class="btn" href="{{ url_for('quiz') }}">前往練習</a>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/tongue_teaching.js') }}"></script>
<script>
  // 初始化互動（建立按鈕與事件）
  window.TongueTeaching?.init({
    regionMount: document.getElementById('region-btns'),
    colorMount: document.getElementById('color-btns'),
    resultMount: document.getElementById('result-body'),
    resultContainer: document.getElementById('result'),
    resetBtn: document.getElementById('reset'),
    // 套用你的按鈕外觀：被選中 → 取消 outline
    onBtnStateChange: (btn, active) => {
      if(active){ btn.classList.remove('btn-outline'); }
      else{ btn.classList.add('btn-outline'); }
    }
  });
</script>
{% endblock %}
